%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
% Name: XeTeX+xeCJK日常使用模板
% Author: Lox Freeman
% Email: xiaohanyu1988@gmail.com
% 、
% 本文档可以自由转载、修改，希望能给广大TeXer的中文之路提供一些方便。
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\documentclass[a4paper, 12pt, titlepage]{article}

%%%%%%%%%%%%%%%%%%%%%%%%% xeCJK相关宏包%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{xltxtra,fontspec,xunicode}
\usepackage[slantfont, boldfont, CJKchecksingle]{xeCJK}

\CJKsetecglue{\hskip 0.15em plus 0.05em minus 0.05em}
% slanfont: 允许斜体
% boldfont: 允许粗体
% CJKnormalspaces: 仅忽略汉字之间的空白,但保留中英文之间的空白。
% CJKchecksingle: 避免单个汉字单独占一行。
% CJKaddspaces: [备选]忽略汉字之间的空白,并且自动在中英文转换时插入空白。

% \CJKlanguage{zh-cn}                 % 中文标点特殊处理
\XeTeXlinebreaklocale "zh"           % 针对中文进行断行
\XeTeXlinebreakskip = 0pt plus 1pt minus 0.1pt
% 给予TeX断行一定自由度
%%%%%%%%%%%%%%%%%%%%%%%%% xeCJK%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%% 日常所用宏包、通通放在一起%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 什么常用的宏包都可以放这里。下面是我常用的宏包，每个都给出了简要注释
\usepackage[top=2.5cm, bottom=3cm, left=2.5cm, right=2.5cm]{geometry} % 控制页边距
\usepackage{enumerate}               % 控制项目列表
\usepackage{multicol}                % 多栏显示

\usepackage[%
pdfstartview=FitH,%
CJKbookmarks=true,%
bookmarks=true,%
bookmarksnumbered=true,%
bookmarksopen=true,%
colorlinks=true,%
citecolor=seco,%
linkcolor=seco,%
anchorcolor=seco,%
urlcolor=seco%
]{hyperref}                          % 超链接相关设置

\usepackage{titlesec}                % 控制标题
\usepackage{titletoc}                % 控制目录
\usepackage{type1cm}                 % 控制字体大小
\usepackage{indentfirst}             % 首行缩进，用\noindent取消某段缩进
\usepackage{bbding}                  % 一些特殊符号
\usepackage{cite}                    % 支持引用
\usepackage{framed,color,xcolor}     % 支持彩色文本、底色、文本框等
\usepackage{latexsym}                % LaTeX一些特殊符号宏包
\usepackage{amsmath}                 % AMS LaTeX宏包
\usepackage{bm}                      % 数学公式中的黑斜体
\usepackage{relsize}                 % 调整公式字体大小：\mathsmaller, \mathlarger
\usepackage{soul}                    % 下划线自动回车换行
\usepackage{attachfile}              % 添加附见使用的宏包
\usepackage{parcolumns}              % 列排版
% \usepackage{setspace}

\makeindex                           % 生成索引

\makeatletter
\let\std@footnotetext\@footnotetext
\usepackage{setspace}
\let\@footnotetext\std@footnotetext
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%% 绘图方法%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{graphicx}                % 图形宏包
\graphicspath{{./figure/}{./figures/}{./image/}{./graphics/}{./graphic/}{./pictures/}{./picture/}}

\usepackage{tikz}
\usepackage{amsmath,bm,times}
\usepackage{verbatim}

\usepackage{tabularx}

\usetikzlibrary{shapes,arrows,shadows,fit,snakes,positioning,decorations}
\usetikzlibrary{decorations.shapes}
\usetikzlibrary{calc}           %coordinate

\usepackage{caption}
\usepackage{float}

\ifx\du\undefined
\newlength{\du}
\fi
\setlength{\du}{15\unitlength}

\newlength\Textwd
\setlength\Textwd{3cm}
\newcommand\Textbox[2]{%
  \parbox[c][#1][c]{\Textwd}{\linespread{0.5}\centering#2}}

\makeatletter
\DeclareRobustCommand{\rvdots}{%
  \vbox{
    \baselineskip6\p@\lineskiplimit\z@
    \kern-\p@
    \hbox{.}\hbox{.}\hbox{.}
  }}
\makeatother

\makeatletter
\newcommand{\gettikzxy}[3]{%
  \tikz@scan@one@point\pgfutil@firstofone#1\relax
  \edef#2{\the\pgf@x}%
  \edef#3{\the\pgf@y}%
}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%% 绘图方法结束%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%% fancyhdr设置页眉页脚%%%%%%%%%%%%%%%%%%%%
\usepackage{etoolbox}
\usepackage{fancyhdr}                % 页眉页脚
\pagestyle{fancy}                    % 页眉页脚风格
\setlength{\headheight}{15pt}        % 有时会出现\headheight too small的warning

\makeatletter
\patchcmd{\@fancyhead}{\rlap}{\color{seco}\rlap}{}{}
\patchcmd{\headrule}{\hrule}{\color{seco}\hrule}{}{}
\patchcmd{\@fancyfoot}{\rlap}{\color{seco}\rlap}{}{}
\patchcmd{\footrule}{\hrule}{\color{seco}\hrule}{}{}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%% fancyhdr设置结束%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%% xeCJK字体设置%%%%%%%%%%%%%%%%%%%%%%%%%
\setmainfont[Ligatures=TeX]{Minion Pro} % (\textrm)
\setsansfont{Myriad Pro}                % (\textsf)
\setmonofont{Adobe Garamond Pro}        % Palatino Linotype

\setCJKmainfont[BoldFont={方正兰亭纤黑_GBK},ItalicFont={Adobe Kaiti Std}]{Adobe Kaiti Std}
\setCJKsansfont[BoldFont={方正兰亭纤黑_GBK}]{方正兰亭纤黑_GBK}
\setCJKmonofont{方正兰亭纤黑_GBK}
%%%%%%%%%%%%%%%%%%%%%%%%% xeCJK字体设置结束%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%% listings宏包粘贴源码%%%%%%%%%%%%%%%%%%%%
\usepackage{listings}                % 方便粘贴源代码，部分代码高亮功能
\lstloadlanguages{}                  % 所要粘贴代码的编程语言

\newfontfamily\listingsfont{Calibri}
\newfontfamily\listingsfontinline{Calibri}

\definecolor{sh_keyword}{rgb}{0.06, 0.10, 0.98}   % #101AF9
\definecolor{shadecolor}{rgb}{0.83, 0.83, 0.83}
\definecolor{monokai-grey-dark}{RGB}{39, 40, 34}   % #272822
\definecolor{monokai-yellow-light}{RGB}{248, 248, 246}   % #F8F8F2
\definecolor{monokai-green}{RGB}{166, 226, 42}
\definecolor{dark green}{rgb}{0.000000,0.392157,0.000000}
\definecolor{forest green}{rgb}{0.133333,0.545098,0.133333}
\def\lstsmallmath{\leavevmode\ifmmode \scriptstyle \else  \fi}
\def\lstsmallmathend{\leavevmode\ifmmode  \else  \fi}

% \definecolor{seco}{RGB}{9,80,3}
% \definecolor{seco}{RGB}{0,145,215}
\definecolor{seco}{RGB}{0,175,152}
\definecolor{main}{RGB}{127,191,51}

% \makeatletter
%   \newcommand\listingfont{\@setfontsize\listingfont{11pt}{13.2pt}}
% \makeatother

\renewcommand{\lstlistingname}{代码}

\lstset {
  language=c++,
  backgroundcolor=\color{monokai-grey-dark},
  % frame=shadowbox,
  % breaklines,
  % rulesepcolor=\color{red!20!green!20!blue!20},
  showspaces=false,showtabs=false,tabsize=4,
  numberstyle=\tiny\color{black},numbers=left,
  % basicstyle= \listingfont\listingsfont\color{monokai-yellow-light},
  basicstyle= \small\listingsfont\color{monokai-yellow-light},
  stringstyle=\color{dark green},
  keywordstyle = \color{monokai-green}\bfseries,
  commentstyle=\footnotesize\color{forest green}\itshape,
  captionpos=b,
  showspaces=false,showtabs=false, showstringspaces=false,
  xleftmargin=0.7cm, xrightmargin=0.5cm,
  % lineskip=-0.3em,
  breaklines=tr,
  escapebegin={\lstsmallmath}, escapeend={\lstsmallmathend},
  extendedchars=false
}

\lstnewenvironment{acol}[1][]{\lstset{language={[x86masm]Assembler},#1}}{}
\newenvironment{parcolumenv}[1] {\begin{spacing}{#1}}{\end{spacing}}
%%%%%%%%%%%%%%%%%%%%%%%%% listings宏包设置结束%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%% 一些关于中文文档的重定义%%%%%%%%%%%%%%%%%

%%%% 数学公式定理的重定义%%%%
\newtheorem{example}{例}                                   % 整体编号
\newtheorem{algorithm}{算法}
\newtheorem{theorem}{定理}[section]                        % 按 section 编号
\newtheorem{definition}{定义}
\newtheorem{axiom}{公理}
\newtheorem{property}{性质}
\newtheorem{proposition}{命题}
\newtheorem{lemma}{引理}
\newtheorem{corollary}{推论}
\newtheorem{remark}{注解}
\newtheorem{condition}{条件}
\newtheorem{conclusion}{结论}
\newtheorem{assumption}{假设}

%%%% 章节等名称重定义%%%%
\renewcommand{\contentsname}{目\hspace{2em}录}
\renewcommand{\indexname}{索引}
\renewcommand{\listfigurename}{插图目录}
\renewcommand{\listtablename}{表格目录}
\renewcommand{\figurename}{图}
\renewcommand{\tablename}{表}
\renewcommand{\appendixname}{附\hspace{2em}录}

%%%% 设置chapter、section与subsection的格式%%%%
\titleformat{\chapter}{\centering\huge}{\color{seco}第\thechapter{}章}{1em}{\color{seco}\textbf}
\titleformat{\section}{\centering\LARGE}{\color{seco}\thesection}{1em}{\color{seco}\textbf}
\titleformat{\subsection}{\Large}{\color{seco}\thesubsection}{1em}{\color{seco}\textbf}
%%%%%%%%%%%%%%%%%%%%%%%%% 中文重定义结束%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%% 一些个性设置%%%%%%%%%%%%%%%%%%%%%%
\setlength{\parskip}{0.5\baselineskip}     % 设定段间距
\linespread{1.6}                           % 设定行距
\newcommand{\pozhehao}{\kern0.3ex\rule[0.8ex]{2em}{0.1ex}\kern0.3ex}% 中文破折号，据说来自清华模板

\setCJKfamilyfont{title}{方正正中黑简体}

\newcommand*{\TitleFont}{\usefont{\encodingdefault}{\rmdefault}{b}{n}\fontsize{32}{40}\selectfont\CJKfamily{title}\color{seco}}% 标题字体设置

\renewcommand{\today}{\color{seco}\number\year 年 \number\month 月 \number\day 日}
%%%%%%%%%%%%%%%%%%%%%%%%% 个性设置结束%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%% 正文部分%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\setlength{\parindent}{2em}
% 设定首行缩进为2em。注意此设置一定要在document环境之中。
% 这可能与\setlength作用范围相关

\title{\TitleFont 数据结构之排序\vspace{8cm}}
\author{\href{mailto:q00148943@gmail.com}{\LARGE{秦新良}}}
\date{\vspace{0.5cm}\today}

\maketitle

\tableofcontents
\newpage


\section{排序}
本篇介绍常用的排序算法并给出其实现，最后对各种排序算法作比较。代码\ref{lst1}给出了排序算法链表实现的链表定义。
\begin{spacing}{1.0}
  \lstinputlisting[label=lst1,caption=链表]{list/list.h}
\end{spacing}

\subsection{插入排序}
\label{subsec:labelsub1}
插入排序的一个非常形象的说明就是打牌。起牌的过程中，每次我们摸起一张牌后，都会和手中已有的牌做比较，然后将牌插到相应的位置，如图\ref{fig00}所示。
\begin{figure}[H]
  \setlength{\abovecaptionskip}{0pt}
  \centering
  \includegraphics[width=0.6\textwidth]{playing_cards.jpg}
  \caption{打牌}
  \label{fig00}
\end{figure}


整个起牌的过程，就是对手中的牌的一次插入排序过程。当然，也不排除有的人对手中的牌并不排序，因为这样可以有效的防止“邻居偷窥“，该场景就不在我们的举例范围之内了。

插入排序的时间复杂度为O(${n}^{2}$)，排序过程中只需O(1)个元素的额外空间即可完成整个数组的排序。代码\ref{lst2}给出了插入排序的C代码实现。
\begin{spacing}{1.0}
  \lstinputlisting[label=lst2,caption=插入排序]{list/insert_sort.c}
\end{spacing}


为了更清楚的理解该算法，下面以排序6、5、3、2、8、7、1、4这一组数为例来说明插入排序的算法原理。

\captionsetup[figure]{labelformat=empty}

i = 0\footnote{真实的排序不会从i = 0开始，这里用（i = 0）\&\&（j = 0）表示初始未排序。}时：
\input{figure/insert_sort1}

i = 1时：
\input{figure/insert_sort2}

i = 2时：
\input{figure/insert_sort3}

i = 3时：
\input{figure/insert_sort4}

i = 4时：
\input{figure/insert_sort5}

i = 5时：
\input{figure/insert_sort6}

i = 6时：
\input{figure/insert_sort7}

i = 7时：
\input{figure/insert_sort7}

插入排序使用的是增量排序方法，即在排好的子数组A[0..j-1]中插入元素A[j]，形成排好序的子数组A[0..j]。

插入排序是稳定的\footnote{\href{http://baike.baidu.com/view/547325.htm?fr=aladdin}{假定在待排序的记录序列中，存在多个具有相同的关键字的记录，若经过排序，这些记录的相对次序保持不变，即在原序列中，ri=rj，且ri在rj之前，而在排序后的序列中，ri仍在rj之前，则称这种排序算法是稳定的；否则称为不稳定的。}}排序算法，在待排序元素基本有序的情况下，其最好可达到接近O(n)的时间复杂度。在元素基本有序或元素不多的情况下，可选择插入排序。

代码\ref{lst2}并不是插入排序的最优实现，还有一种实现方法可减少元素交换时元素之间的拷贝，有兴趣的读者可以尝试实现之。最后，我们以插入排序的链表实现来结束本小节，见代码\ref{lst3}。
\begin{spacing}{1.0}
  \lstinputlisting[label=lst3,caption=插入排序]{list/list_insert_sort.c}
\end{spacing}

\subsection{归并排序}
\label{subsec:merge_sort}
归并排序采用分而治之的思想，

\input{figure/merge_sort1}

\subsection{冒泡排序}
\label{subsec:bubble_sort}

冒泡排序可以说是所有排序算法中最“有名”的一个，因为其名字好记、原理简单：循环对数组中相邻的元素两两比较，每次循环结束后，都会有一个元素在其正确的位置上，即已排序。代码\ref{lst4}给出其C语言的实现。
\begin{spacing}{1.0}
  \lstinputlisting[label=lst4,caption=冒泡排序]{list/bubble_sort.c}
\end{spacing}

从代码可以看出，冒泡排序的时间复杂度为O($n^2$)。同插入排序一样，排序过程中只需要一个额外的元素空间。但代码\ref{lst4}并不是该算法的最优实现，有兴趣的读者可以尝试优化该实现。

冒泡排序算法虽然简单，我们还是通过对23、17、5、90、12这一组数排序来说明该算法的原理。

i = 5\footnote{初始状态，实际从i = 4开始。}时：
\input{figure/bubble_sort1}

i = 4时：
\input{figure/bubble_sort2}

i = 3时：
\input{figure/bubble_sort3}

i = 2时：
\input{figure/bubble_sort4}

i = 1时：
\input{figure/bubble_sort5}

如果觉得如上排序过程不够形象，请移步\href{http://v.youku.com/v_show/id_XMzMyOTAyMzQ0.html}{这里}，观看舞动的排序算法之冒泡排序。

冒泡排序是一种稳定的排序算法，前提是排序过程中不对相同的\footnote{即array[j + 1] == array[j]}元素元素作交换。最后同样给出冒泡排序的链表实现来作为本小结的结尾，见代码\ref{lst5}。
\begin{spacing}{1.0}
  \lstinputlisting[label=lst5,caption=冒泡排序]{list/list_bubble_sort.c}
\end{spacing}


\subsection{选择排序}
选择排序相对于冒泡排序的一个最大改进就是减少了排序过程中元素的移动，其原理如下：

\href{http://zh.wikipedia.org/wiki/\%E9\%80\%89\%E6\%8B\%A9\%E6\%8E\%92\%E5\%BA\%8F}{首先在未排序序列中找到最小（大）元素，存放到排序序列的起始位置，然后，再从剩余未排序元素中继续寻找最小（大）元素，然后放到已排序序列的末尾。以此类推，直到所有元素均排序完毕。}

代码\ref{lst6}给出了选择排序的C语言实现。
\begin{spacing}{1.0}
  \lstinputlisting[label=lst6,caption=选择排序]{list/selection_sort.c}
\end{spacing}

从代码\ref{lst6}中可以看出，选择排序和冒泡排序相同，其时间复杂度都是O($n^2$)，排序过程都只需要一个元素的额外空间；但不同于冒泡排序，每次都交换相邻的满足条件的两个元素，插入排序每次遍历，都是找出最小（大）元素，一次循环结束后再判断是否需要交换。同样，我们以排序23、17、5、90、12这一组数来说明选择排序的原理。

i = 0时：
\input{figure/select_sort1}

i = 1时：
\input{figure/select_sort2}

i = 2时：
\input{figure/select_sort3}

i = 3时：
\input{figure/select_sort4}

更加生动的排序演示，移步\href{http://v.youku.com/v_show/id_XMjU4NTY5NTcy.html?from=y1.2-1-95.3.3-1.1-1-1-2}{这里}，观看舞动的排序算法之选择排序。

选择排序是不稳定的排序算法，如排序48、38、65、97、76、13、27、48这一组元素，排序完成后，48这两个元素的顺序会发生交换。

\subsection{希尔排序}
希尔排序，又称递减增量排序算法，是一种改进的插入排序。其排序过程如下：

先取一个正整数$g_1 < n$\footnote{n为待排序元素的个数。}，把所有序号相隔$g_1$的元素作为一组进行直接插入排序；然后取$g_2 < g_1$，重复上述分组和排序操作，直至$g_i = 1$，即对所有记录进行一次插入排序。

代码\ref{lst7}给出了希尔排序的C语言实现。
\begin{spacing}{1.0}
  \lstinputlisting[label=lst7,caption=希尔排序]{list/shell_sort.c}
\end{spacing}

同样，我们以排序一组实际的元素为例来说明希尔排序的排序过程。这次排序的元素为81、94、11、96、12、35、17、95。

step = 4时：
\input{figure/shell_sort1}

step = 2时：
\input{figure/shell_sort2}

step = 1时：
\input{figure/shell_sort3}

$step\ =\ 2$时，最终排序的效果等同于对所有奇数和所有的偶数进行的一次插入排序，但在程序的运行过程中，并不是先排序奇数元素，再排序偶数元素，整个过程和$step\ =\ 4$时一样，但$step\ =\ 2$和$step\ =\ 1$只给出了一个最终排序的效果，没再一一列举。更生动的演示点击\href{http://v.youku.com/v_show/id_XMjU4NTcwMDIw.html}{这里}，观看舞动的排序算法之希尔排序。

影响希尔排序时间复杂度的一个关键因素是步长的选择。关于如何先取步长，请参考\href{http://zh.wikipedia.org/wiki/\%E5\%B8\%8C\%E5\%B0\%94\%E6\%8E\%92\%E5\%BA\%8F#.E6.AD.A5.E9.95.BF.E5.BA.8F.E5.88.97}{这里}。

\subsection{快速排序}
\label{subsec:quick_sort}

\subsection{堆排序}
\label{subsec:heap_sort}

\section{总结}


\end{document}
%%%%%%%%%%%%%%%%%%%%%%%%% 正文部分结束%%%%%%%%%%%%%%%%%%%%%%

